## Armazenamento de Dados

Em seus primeiros passos, a computação tinha técnicas extremamente rudimentares para armazenar dados, e os fazia apenas para a execução de seus sistemas. Os primeiros computadores faziam uso de cartões perfurados como forma de se manter as instruções do software que executavam, porém esta tecnologia dificilmente seria útil ou prática, hoje em dia, devido à extensão do código das aplicações.  
Portanto, com o passar do tempo novas formas de armazenamento de dados foram criadas e logo surgiram os primeiros discos rígidos, compostos por pratos metálicos, onde a informação era gravada em código binário (0 e 1) de forma magnética. A evolução dos discos rígidos sempre se deu com relação a sua capacidade de armazenamento e velocidade do processo de leitura e gravação. Além disso, nos últimos anos ganhou um grande competidor, que embora use magnetismo na gravação de dados, não usa mais discos móveis, sendo denominado SSD ou drive de estado sólido.  
Com os SSDs o processo de leitura e gravação ganha velocidades superiores a dos melhores discos rígidos, e o fato de não apresentarem partes móveis faz com que estas unidades de armazenamento sejam altamente confiáveis e duradouras. O armazenamento sempre foi uma questão delicada em computadores e servidores, pois à medida com que computadores e sistemas evoluíam, também aumentava a sua demanda, e com isso, logo surgiram os primeiros serviços de armazenamento na nuvem.  

**Amazon Elastic Block Store**  
Atualmente, com a grande oferta de sistemas e aplicações na nuvem, o armazenamento é um serviço cada vez mais comum. Na AWS, uma das maiores provedoras de nuvem, existem diversas opções, cada uma destinada a uma aplicação específica, indo muito além do simples armazenamento. Um dos serviços a tratar nesta aula é o Amazon Elastic Block Store, um serviço de alta performance da AWS de armazenamento de blocos persistentes de cargas de trabalho.  
O Amazon EBS foi projetado para trabalhar em conjunto com o EC2 e suas instâncias, ou seja, ele armazena os blocos para as instâncias do Amazon EC2 através de volumes, também denominados blocos brutos não formatados e, desta forma, é possível montar estes volumes nas instâncias EC2.  

Os volumes EBS que estão anexados a uma instância são expostos como volumes de armazenamento que persistem independentemente da vida útil da instância. É possível criar um sistema de arquivos sobre esses volumes ou utilizá-los da maneira que utilizaria um dispositivo de bloco (como um disco rígido). É possível alterar dinamicamente a configuração de um volume anexado a uma instância. (AWS 2022a, p.1486).

   
​Embora seja adequado para o uso nas instâncias do EC2, o EBS apresenta algumas recomendações referentes aos dados, portanto se destina a blocos de dados que devem ser disponibilizados com velocidade e tais dados devem persistir com o tempo, a longo prazo. Desta forma, a própria AWS recomenda que o uso do EBS se enquadre bem em casos onde este sistema é o principal sistema de armazenamento de arquivos da aplicação.  
Também indicado para o armazenamento de banco de dados, o EBS oferece leituras e gravações aleatórias e permite elevado *throughput* em gravações longas e contínuas. Outros atributos são a capacidade de gerenciar bancos de dados relacionais em contêineres, análise de big data, dentre outras funções.  
  
**Amazon Simple Storage Solution**  
O S3 é um serviço muito mais popular que o EBS na infraestrutura de armazenamento da AWS (os 3 S’s são de Simple Storage Solution) e representa um serviço de armazenamento de objetos com a oferta de escalabilidade, disponibilidade, segurança elevada e alta performance.  
O S3 se destina ao armazenamento comum de dados, mas muitos de seus usuários o fazem como forma de proteger seus arquivos, em backups de segurança, independente do volume de dados armazenado, e também em projetos específicos que demandam o uso de estruturas como os Data Lakes (armazenamento de dados estruturados e não estruturados), assim como em aplicações para a nuvem/web.  
O serviço oferecido pelo S3 é extremamente simplificado para uso e pode ser econômico com a escolha da classe de armazenamento correta e dependendo da região e zona de disponibilidade alocada. Neste serviço, o usuário AWS pode configurar os controles de acesso e as configurações de cada modelo de negócio. 

Figura 1: Estrutura do S3  
  

![](https://paperx-dex-assets.s3.sa-east-1.amazonaws.com/images/1676654203864-ljltdTBtCH.png)

Fonte: AWS (2022d, Documento Online).

  
No S3, os dados são armazenados em estruturas denominadas Buckets que podem receber até 5 terabytes em arquivo. Além disso, suas principais funções são a estrutura que permite anexar Tags de metadados, os processos comuns de movimentação e armazenamento de dados, além de permitir que o usuário configure um bucket para hospedar um site web estático, utilizando um endereço específico do bucket ou um domínio web do usuário.  
  
**Amazon Elastic File System**  
Outro importante serviço de armazenamento oferecido pela AWS é o Amazon Elastic File System (Amazon EFS), um sistema simples do tipo set-and-forget com sua aplicação destinada à computação em nuvem, mas que também possui recursos para ambientes locais. Capaz de armazenar e gerenciar Petabytes de forma contínua e elástica, ou seja, seu gerenciamento se adapta ao volume de arquivos armazenados. A criação de sistemas de arquivos é realizada por sua interface web e o próprio EFS gerencia a infraestrutura de armazenamentos para seus usuários. Como principais compatibilidades o Amazon EFS possui interface com:  

\[…\] o protocolo Network File System versão 4 (NFSv4.1 e NFSv4.0), de forma que os aplicativos e ferramentas usados atualmente funcionam perfeitamente com o Amazon EFS. Várias instâncias de computação, incluindo Amazon EC2, Amazon ECS e AWS Lambda.

   
​Por permitir acessos simultâneos, o Amazon EFS atua como uma fonte de dados capaz de lidar em conjunto com cargas de trabalho e aplicações em execução em suas instâncias do EC2. Outra peculiaridade diz respeito ao seu custo e forma de tarifação, pois com o EFS não existe taxa mínima de uso, com o custo sendo calculado de acordo com o armazenamento utilizado. Dentre as suas principais classes de armazenamento, o AWS EFS oferece:  

- Classes de armazenamento padrão: EFS Standard e EFS Standard; Acesso Infrequente (Padrão IA), que oferecem resiliência Multi-AZ e os mais altos níveis de durabilidade e disponibilidade.
- Classes de armazenamento de uma zona: EFS One Zone e EFS One Zone; Acesso Pouco Frequente (EFS One Zone—IA), que oferecem aos clientes a opção de economia adicional ao optar por salvar seus dados em uma única zona de disponibilidade. (AWS 2021, p.01).

O AWS EFS é considerado um serviço adaptável a diversas aplicações e usos, pois é capaz de oferecer excelentes taxas de transferência ao mesmo tempo em que mantém a latência baixa.  
  
**Comparativo: armazenamento em blocos e objetos**  
  
  
  
Uma boa forma de se compreender os diferentes serviços de armazenamento da AWS está em diferenciá-los de acordo com o que são capazes de armazenar: se são objetos ou blocos. De forma geral, os sistemas de armazenamento lidam com arquivos, blocos ou objetos e para cada um dos 3 tipos existem processos diferentes para armazenar e apresentam limitações distintas.  
O armazenamento de arquivos pode ser considerado um processo simplificado se comparado com os demais, pois é um armazenamento de nível, onde os dados são armazenados como informações únicas em pastas, de forma semelhante com que este processo é realizado em um computador pessoal ou localmente em um servidor.  
Para cada dado armazenado é criado um caminho a ser utilizado pelo sistema para que tal arquivo seja recuperado, lido ou reescrito. Este caminho é escrito em forma de metadado e não pode ser excessivamente longo sob o risco de o arquivo ser perdido, ou seja, embora armazenado não pode ser recuperado pelo sistema. Os metadados dos arquivos são como aquelas fichas dos catálogos de bibliotecas e informam o status do arquivo e seu caminho na unidade de armazenamento.  
Como seu nome indica, o armazenamento em blocos faz a divisão dos dados armazenados em blocos distintos, onde cada bloco recebe seu próprio identificador. Desta forma, este formato de armazenamento usa a otimização com blocos menores dedicados a quantidades menores de arquivos, inclusive em diferentes sistemas operacionais, ou seja, 

Geralmente, o armazenamento em blocos é configurado para dissociar os dados do ambiente do usuário e distribuí-los entre vários ambientes mais adequados para disponibilizar cada dado. Quando os dados são solicitados, o software de armazenamento subjacente remonta os blocos a partir desses ambientes e os apresenta ao usuário. Normalmente, esse sistema é implantado em ambientes de rede de área de armazenamento (SAN) e precisa estar associado a um servidor funcional. (REDHAT 2018, Documento Online).  
​  

Como cada bloco possui seu próprio caminho, o processo de recuperação dos dados se torna otimizado e acelerado, se comparado com o modelo de armazenamento de arquivos. Isso ocorre pelo simples fato de que cada bloco existe de forma independente dos demais, tornando o processo de armazenamento eficiente e de fácil gestão, até mesmo quando aplicado a grandes bancos de dados.  
Como desvantagens, este modelo de armazenamento apresenta um custo superior a modelos, como os observados no S3, além de sua capacidade limitada de processar os metadados, o que faz com que o desenvolvedor tenha que transferir a responsabilidade deste processo para sua aplicação, por exemplo.  
Por fim, temos o armazenamento de objetos, ou baseado em objetos, e pode ser representado como sendo uma estrutura plana onde os arquivos são dispostos em partes, ou seja, os dados são fragmentados em suas unidades denominadas objetos. Diferente do modelo de blocos, os objetos são armazenados em um único repositório e não usam pastas ou blocos.  
Neste modelo, os volumes de armazenamento atuam como unidades modulares, onde cada repositório apresenta seu identificador único e utilizado para que o sistema possa identificar onde cada objeto está armazenado. Para os objetos, os metadados apresentam detalhes como a idade, as configurações de privacidade/segurança e até mesmo detalhes das contingências de seu acesso. Neste sentido, conforme apresenta RedHat (2018, documento online), estes metadados podem apresentar elevado detalhamento, 

\[…\] e guardar informações sobre onde um vídeo foi filmado, que câmera foi utilizada e quais atores aparecem em cada quadro. Para recuperar os dados, o sistema operacional do armazenamento usa os metadados e identificadores. Isso faz uma distribuição melhor da carga e permite aos administradores aplicar políticas que realizam pesquisas mais robustas. (REDHAT 2018, Documento Online).  
​  

Outra diferenciação para com o modelo de armazenamento de blocos está no fato de que o armazenamento de objetos apresenta a possibilidade de grande economia ao seu utilizador, se enquadra no formato de faturamento onde o cliente paga apenas o que utiliza e apresenta algumas vantagens como o fato de que pode ser facilmente escalonado.  
Dentre suas desvantagens, podemos citar o fato de que os objetos, após inseridos, não podem ser modificados, pois são gravados em um único lote. Outro fator diz respeito a sua inabilidade de lidar com bancos de dados tradicionais por ser um processo de gravação de baixa velocidade.  
  
  
  
**Atividade Extra**  
  
Assista ao Webinar oferecido pela AWS sobre Armazenamento.  
Link do vídeo: [https://www.youtube.com/watch?v=2qjagFJfdfQ](https://www.youtube.com/watch?v=2qjagFJfdfQ) **(Acesso em 04/08/2022)**  
  
  
**Referência Bibliográfica**  
  
AWS. **Amazon Elastic Block Store (EBS)**. 2022a. Disponível em: < [https://aws.amazon.com/pt/ebs/](https://aws.amazon.com/pt/ebs/) > **(Acesso em 04/08/2022)**  
  
AWS. **Amazon Elastic Compute Cloud Manual do usuário para instâncias do Linux**. 2022b. Disponível em: < [https://docs.aws.amazon.com/pt\_br/AWSEC2/latest/UserGuide/ec2-ug.pdf#AmazonEBS](https://docs.aws.amazon.com/pt_br/AWSEC2/latest/UserGuide/ec2-ug.pdf#AmazonEBS) > **(Acesso em 04/08/2022)**  
  
AWS. **Amazon Elastic File System Guia do usuário**. 2021. Disponível em: < [https://docs.aws.amazon.com/pt\_br/efs/latest/ug/efs-ug.pdf#whatisefs](https://docs.aws.amazon.com/pt_br/efs/latest/ug/efs-ug.pdf#whatisefs) > **(Acesso em 04/08/2022)**  
  
AWS. **Amazon S3**. 2022c. Disponível em: < [https://aws.amazon.com/pt/s3/](https://aws.amazon.com/pt/s3/) > **(Acesso em 04/08/2022)**  
  
AWS. **Recursos do Amazon S3**. 2022d. Disponível em: < [https://aws.amazon.com/pt/s3/features/](https://aws.amazon.com/pt/s3/features/) > **(Acesso em 04/08/2022)**  
  
REDHAT. **Armazenamento de arquivos, em blocos ou de objetos?** 2018. Disponível em: < [https://www.redhat.com/pt-br/topics/data-storage/file-block-object-storage#:~:text=O%20armazenamento%20em%20blocos%20separa,e%20o%20armazenamento%20s%C3%A3o%20oferecidos](https://www.redhat.com/pt-br/topics/data-storage/file-block-object-storage#:~:text=O%20armazenamento%20em%20blocos%20separa,e%20o%20armazenamento%20s%C3%A3o%20oferecidos) .> **(Acesso em 04/08/2022)**